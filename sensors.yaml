#################################################################
## Sensors
#################################################################

  - platform: yr
  
  - platform: template
    sensors:
      upstairs_away_mode:
        entity_id: climate.upstairs
        friendly_name: Upstairs Away
        value_template: "{{ is_state_attr('climate.upstairs', 'away_mode', 'on') }}"
  
      someone_home:
        value_template: >
          {{ is_state('device_tracker.patphone_patphone', 'home') or
          is_state('device_tracker.linaphone_linaphone', 'home') }}
        friendly_name: Someone Home
  
      away_mode:
        friendly_name: Away Mode
        value_template: >
          {% if is_state('sensor.upstairs_away_mode', 'true') and
                is_state('sensor.someone_home', 'false') %}
            Away
          {% else %}
            Home
          {% endif %} 
      
      dstairs_home_set_point:
        friendly_name: Downstairs Home Set Point
        value_template: >
          {% if is_state_attr('climate.downstairs', 'operation_mode', 'heat') %}
            {% if is_state('input_boolean.sleep_mode', 'off') %}
              {{ float(74) }}
            {% else %}
              {{ float(61) }}
            {% endif %}
          {% elif is_state_attr('climate.downstairs', 'operation_mode', 'cool') %}
            {% if is_state('input_boolean.sleep_mode', 'off') %}
              {{ float(77) }}
            {% else %}
              {{ float(86) }}
            {% endif %}
          {% endif %}
      
      dstairs_away_set_point:
        friendly_name: Downstairs Away Set Point
        value_template: >
          {% if is_state_attr('climate.downstairs', 'operation_mode', 'heat') %}
            {{ float(61) }}
          {% elif is_state_attr('climate.downstairs', 'operation_mode', 'cool') %}
            {{ float(86) }}
          {% endif %}
